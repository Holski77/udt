=Multi Rotor Design - User Manual=

This page describes the use of MRD to design or simulate a multi-rotor UAV.

= Introduction =

MRD is an open source software developed in Enac's UAV department in order to design home made rotorcrafts, mainly quadrotors. MRD is based on the Qprop propeller simulator and on the Qmil design tool. It allows the user to simulate an existing vehicle, but also to run batch analysis and to plot the results in order to chose the optimum propeller, motor and battery for a given project.
For people capable of producing propellers, MRD is also capable of designing an optimized propeller to meet your mission constraints. 



= Setup =

How to get MRD operational.

== What you need ==

MRD is develloped on linux and thus is for now only available on linux based OS. However it should not be really difficult to port it to windows. 

 # That means that the first thing you need is a computer running with     Ubuntu or other Linux based OS.
 # Install the gfortran-4.5 compiler with the command: *$ sudo apt-get install gfortran-4.5*
 # Install svn (Subversion) in order to download keep the program up to date and submit your work if you want to contribute to this project. To do that use: *$ apt-get install subversion* 




== Setup step by step ==

You are now ready to download the source files and compile the software.

 # First you need to create a folder wherever you want to have the program and move inside this folder. For example you can create a UDT folder using the command: *$ mkdir UDT*
 # Move inside this folder using: *$ cd UDT*
 # Then use the following command to register in google code to allow svn to download from the host : *$ svn checkout http://udt.googlecode.com/svn/trunk/ udt-read-only*
 # To update the folder run the command : *$ svn up*

A udt folder will be created, it wil contain all you need to compile and run the software. Inside you will find:
 * *BIN* : the folder in which the binaries and the Makefile are
 * *SRC* : the folder containing the source files
 * *RUNS* : In which you store your propeller, motor, airfoil databases and your simulation configuration file. It will also contain the results once you have run some simulations. 

To compile Go to directory /BIN 
Edit the *Makefile* in order to change the fortran compiler if necessary (default is the gfortran-4.5). 
Type *$ make* to compile Qprop,Qmil and MRD all together.

MRD is now ready to run.

= Running the software =

== Modes available ==

MRD can be run in three different modes according to what you want to do and what kind of data you have. These three modes are:

 ===Qprop based simulation mode :===
 This mode is meant to simulate multirotor vehicles using calls to Qprop in order to achieve higher precision and additional output. The software will combine propeller and motor models available. The difficult part here is to get an accurate propeller model which can be used by Qprop, i.e. span, cord law and airfoil characteristics. If your propeller is well known you should be able to find it's model using google otherwise you can find a modelisation procedure here http://web.mit.edu/drela/Public/web/qprop/prop_measure.pdf


 In addition the user can create engines model from his experiments or the manufacturer data. The model used is similar to the Qprop model but has two additional coefficients that are relevant for UAV design:

   * *The motor mass* in kg
   * *The maximum working power* in W

 ===Simplified simulation mode :=== 
 In this mode the propeller is described by eight coefficients. This allow the user to create a model for an existing propeller just by doing some basic measurment on it. As it is not calling Qprop this mode is also much faster.
 The coefficients describing the aerodynamic effieciency of the propeller are:
   * *K0_THRUST* in N (~0)
   * *K1_THRUST* in N/RPM
   * *K2_THRUST* in N/RPM^2
   * *K0_TORQUE* in Nm (~0)
   * *K0_TORQUE* in Nm/RPM 
   * *K0_TORQUE* in Nm/RPM^2 

 These coeffiecients can be computed using excel for example and approximating the Thrust(RPM) and Torque(RPM) response with the following secont order polynoms:

 Thrust(RPM) = K0_THRUST + K1_THRUST.RPM + K2_THRUST.RPM^2

 Torque(RPM) = K0_TORQUE + K1_TORQUE.RPM + K2_TORQUE.RPM^2

 The last coefficients are the *MASS* in kg and the *RADIUS* of the propeller in meter.


 ===Propeller design mode :=== 
 This mode allow the user to generate propellers using Qmil according to some design constraints, simulate them and sort the ones meeting your mission constraints. The software will output a Qprop-type definition file which can allow you to design and produce an optimal propeller for your aircraft.

 The only inputs this mode need is the aerodynamic coefficients of the airfoils you want to use and the motors models. 


==Running a Simulation==

To run a simulation (or a design procedure) using MRD you need to create a Case folder containing the data and the incoming results. This folder needs to be located in the udt/MRD/RUNS folder. The easiest way to do it is to go inside the RUNS folder duplicate and rename the CASEexp folder. Call it for example SIMU1.

Then move inside this new folder. You will find a Case.run file, a DATA folder and a RESULTS folder. The Case.run file is the configuration file that will contain all the parameters of your simulation